## HTTP & HTTPS

<br>

- ##### HTTP(HyperText Transfer Protocol)

  인터넷 상에서 클라이언트(웹 브라우저)와 서버가 정보를 주고 받을 때 쓰는 통신 규약.

<br>

#### HTTP의 보안 취약점

1. **메시지를 가로챌 수 있다(기밀성, Confidentiality). 메시지 조작이 가능하다(무결성, Integrity).**

- 이를 해결하기 위해서 통신을 암호화(HTTPS)하거나 데이터를 암호화 하는 방법 등이 있다.
- 데이터를 암호화 하는 경우 수신측에서는 복호화 과정이 필요하다.

2. **위장이 가능하다(신뢰성, Authenticity)**

- 통신 상대를 확인하지 않기 때문에 위장된 상대와 통신할 수 있다.
- HTTPS는 CA 인증서를 통해 인증된 상대와 통신이 가능하다.
예) DNS Spoofing : DNS 응답 조작 but 유효한 인증서 제공 x

<br>

- ##### HTTPS(HyperText Transfer Protocol Secure)

  HTTP에 더해, 데이터를 암호화하는 SSL/TLS 프로토콜을 사용해 클라이언트와 서버가 자원을 주고 받을 때 쓰는 통신 규약

<br>

#### HTTPS 통신 흐름

1. 애플리케이션 서버(A)를 만드는 기업은 HTTPS를 적용하기 위해 공개키와 개인키를 만든다.

2. 신뢰할 수 있는 CA 기업을 선택하고, 그 기업에게 공개키 관리를 부탁하며 계약을 한다.

    **_CA란?_** : Certificate Authority로, 공개키를 저장해주는 신뢰성이 검증된 민간기업

3. 계약 완료된 CA 기업은 해당 기업의 이름, **A서버 공개키**, 공개키 암호화 방법을 담은 인증서를 만들고, 해당 인증서의 해시를 CA 기업의 개인키로 암호화 (signature)해서 A서버에게 제공한다.

---

4. 클라이언트가 `main.html` 파일을 달라고 A서버에 요청한다.

```
HTTPS 연결을 최초로 시도할 때, 통신은 평문으로 이루어진다.

TLS/SSL Handshake (TCP 3-way handshake 직후) 과정을 통해 암호화한 인증서를 받게 된다.

CA 기업의 공개키는 브라우저가 이미 알고있다. (세계적으로 신뢰할 수 있는 기업으로 등록되어 있기 때문)
```

5. 브라우저는 A서버의 공개키를 얻게 되었다.

6. 클라이언트가 대칭키를 생성하고, A서버의 공개키로 해당 대칭키를 암호화하여 서버로 보낸다.

7. A서버는 암호화된 대칭키를 자신의 개인키로 복호화 하여 클라이언트와 동일한 대칭키를 획득다.

<br>

HTTPS도 무조건 안전한 것은 아니다. (신뢰받는 CA 기업이 아닌 자체 인증서 발급한 경우 등)

이때는 HTTPS지만 브라우저에서 `주의 요함`, `안전하지 않은 사이트`와 같은 알림으로 주의 받게 된다.

<br>

##### [참고사항]

[링크](https://jeong-pro.tistory.com/89)
