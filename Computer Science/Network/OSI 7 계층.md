## OSI 7 계층

<br>

<img src="https://s7280.pcdn.co/wp-content/uploads/2018/06/osi-model-7-layers-1.png">

<br>

#### 7계층은 왜 나눌까?

통신이 일어나는 과정을 단계별로 알 수 있고, 특정한 곳에 이상이 생기면 그 단계만 수정할 수 있기 때문이다.

<br>

##### 1) 물리(Physical)

> 리피터, 허브, 케이블

전기 신호를 통해 데이터를 전송한다.

<br>

##### 2) 데이터 링크(Data Link)

> 스위치

hop-to-hop 전송을 책임진다.

MAC 주소를 이용한다.

<br>

##### 3) 네트워크(Network)

> 라우터

end-to-end (host-to-host) 전송을 책임진다.

IP 주소와 라우터를 이용하여 최적의 경로로 전달하는 역할을 한다.

Q. 스위치 vs 라우터?

스위치 : 한 네트워크 안에서 host 간 연결

라우터 : 네트워크 간 연결

<br>

##### 4) 전송(Transport)

TCP, UDP

프로세스 간 전송을 책임진다.

<br>

##### 5) 세션(Session)

API, Socket

TCP/IP 세션의 생성, 유지, 종료를 책임진다.

Q. 세션?

A. 쿠키, 세션, 토큰에 대해 설명.

https://dsc-sookmyung.tistory.com/313

HTTP는 stateless -> 요청을 보낼 때, 이전 요청에 대해 기억하고 있지 않다.

로그인과 같은 인증(authentication) 기능이 필요하면, 서버로 요청할 때마다 우리가 누구인지 알려줘야 한다.

1. 쿠키 & 세션

[클라이언트] 로그인 -> [서버] 세션 DB에 유저 생성 -> 세션의 ID = 쿠키. response에 담아서 전송한다.

[클라이언트] 쿠키를 브라우저에 저장한다.

[클라이언트] 웹사이트에 방문할 때마다 브라우저는 해당 쿠키를 포함한 요청을 서버에 전송한다. 서버는 이 쿠키로 우리가 누구인지 알아낼 수 있다.

특징

- 전송되는 데이터의 크기가 작다.
- 서버 측에서 관리되므로 클라이언트에 저장되는 것보다 보안성이 높다. -> 탈취되었을 때는 똑같이 위험한데, 토큰과 달리 정보가 저장되어 있지 않아 안전하다고 하는 것 같다..
- 유저 수가 증가하면 세션 db, 서버의 부하도 증가한다.
- 확장성이 낮다. scale-out할 때 구현이 복잡해진다. (sticky session, redis 등)

- 디바이스 강제 로그아웃을 구현할 수 있다. -> 세션을 삭제한다.

2. 토큰

[클라이언트] 로그인 -> [서버] 토큰 생성. response에 담아서 전송.

[클라이언트] 서버에 요청을 하기 위해서는 이 토큰을 같이 보내줘야 한다. 서버는 토큰을 받으면 해당 사인이 유효한지 체크하고, 토큰이 유효하다면 토큰에 적혀 있는 유저로 인증해준다.

(여기서 유효한지 체크한다는 것은 토큰이 조작되었는지 확인하는 과정이다.)

<br>

##### 6) 표현(Presentation)

JPEG, MPEG 등

응용 계층의 다양한 데이터 표현 방식을 통일된 형식으로 변환한다. 예) 정수형 값은 시스템에 따라 16비트, 32비트 등으로 표현된다.

데이터를 압축, 암호화한다.

<br>

##### 7) 응용(Application)

HTTP, FTP, DNS 등

최종 사용자와 직접 상호작용하는 인터페이스를 제공한다.
